task buildIcons << {
    javaexec {
        main = "-jar"
        args = [
                "gradle/tools/ps-image-tool/ps-image-tool-1.0-SNAPSHOT.jar",
                "src/icons/res",
                "build/icons.zip/res/drawable-hdpi",
                "90",
                "90"
        ]
    }
    javaexec {
        main = "-jar"
        args = [
                "gradle/tools/ps-image-tool/ps-image-tool-1.0-SNAPSHOT.jar",
                "src/icons/res",
                "build/icons.zip/res/drawable-xhdpi",
                "136",
                "136"
        ]
    }
    javaexec {
        main = "-jar"
        args = [
                "gradle/tools/ps-image-tool/ps-image-tool-1.0-SNAPSHOT.jar",
                "src/icons/res",
                "build/icons.zip/res/drawable-xxhdpi",
                "192",
                "192"
        ]
    }
    javaexec {
        main = "-jar"
        args = [
                "gradle/tools/ps-image-tool/ps-image-tool-1.0-SNAPSHOT.jar",
                "src/icons/res",
                "build/icons.zip/res/drawable-xxxhdpi",
                "224",
                "224"
        ]
    }
}

task debug << {
    file('build').deleteDir()

    buildIcons.execute()

    packageIcons.execute()

    release.execute()
}

task packageIcons(type: Zip) {
    from 'build/icons.zip/'
    archiveName 'icons'
    destinationDir(file('/build'))
}

task release(type: Zip) {
    from (['build/icons', 'description.xml'])
    archiveName 'theme.mtz'
    destinationDir(file('/bin'))
}